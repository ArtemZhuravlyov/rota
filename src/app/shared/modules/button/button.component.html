<div [class]="colorTheme" [ngClass]="{ disabled: disabled }">
  <ng-container [ngSwitch]="btnType">
    <button
      *ngSwitchCase="buttonTypeEnum.STROKED"
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-stroked-button>
      <ng-container [ngTemplateOutlet]="buttonContent" />
    </button>

    <button
      *ngSwitchCase="buttonTypeEnum.ICON"
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-icon-button>
      <ng-template [ngTemplateOutlet]="iconTemplate" />
    </button>

    <button
      *ngSwitchCase="buttonTypeEnum.LITTLE_ICON"
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-icon-button>
      <ng-template [ngTemplateOutlet]="iconTemplate" />
    </button>

    <button
      *ngSwitchCase="buttonTypeEnum.FAB"
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-fab>
      <ng-template [ngTemplateOutlet]="iconTemplate" />
    </button>

    <button
      *ngSwitchCase="buttonTypeEnum.FLAT"
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-flat-button>
      <ng-container [ngTemplateOutlet]="buttonContent" />
    </button>

    <button
      *ngSwitchDefault
      (click)="onClick()"
      [style]="styleConfig"
      [disabled]="disabled"
      [ngClass]="buttonClasses"
      mat-flat-button>
      <ng-container [ngTemplateOutlet]="buttonContent" />
    </button>
  </ng-container>
</div>

<ng-template #buttonContent>
  <div [ngClass]="buttonItemsClasses">
    <ng-container [ngSwitch]="iconPosition">
      <ng-container *ngSwitchCase="'beforeText'">
        <ng-container [ngTemplateOutlet]="iconTemplate" />
        <span>{{ title | translate }}</span>
      </ng-container>

      <ng-container *ngSwitchCase="'afterText'">
        <span>{{ title | translate }}</span>
        <ng-template [ngTemplateOutlet]="iconTemplate" />
      </ng-container>
    </ng-container>
  </div>
</ng-template>

<!--icon template -->
<ng-template #iconTemplate>
  <!-- first checks if we can show icon -->
  <ng-container *ngIf="isIconButton">
    <!--  second checks if it`s icon with badge  -->
    <ng-container *ngIf="isBadgeShowed; else iconWithoutBadge">
      <ng-container [ngTemplateOutlet]="iconWithBadge" />
    </ng-container>
  </ng-container>
</ng-template>

<ng-template #iconWithBadge>
  <mat-icon
    [matBadge]="badgeInfo"
    [style]="iconStyleConfig"
    matBadgeColor="warn"
    [svgIcon]="icon" />
</ng-template>

<ng-template #iconWithoutBadge>
  <mat-icon [style]="iconStyleConfig" [svgIcon]="icon" />
</ng-template>
